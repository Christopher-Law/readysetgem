---
import { mailtoHref } from "../lib/constants";

type Props = {
	/**
	 * On the home page, section links can be in-page anchors (e.g. "#pricing").
	 * On other pages, use absolute anchors (e.g. "/#pricing") so they work cross-page.
	 */
	sectionHrefPrefix?: "" | "/";
	active?: "home" | "gallery";
};

const { sectionHrefPrefix = "", active } = Astro.props;
const sectionHref = (id: string) => `${sectionHrefPrefix}#${id}`;
---

<header class="sticky top-0 z-50 border-b border-slate-200/80 bg-white/80 backdrop-blur">
	<div class="mx-auto flex w-full max-w-6xl items-center justify-between px-5 py-4">
		<a href="/" class="group flex items-center gap-3">
			<span class="grid h-9 w-9 place-items-center rounded-xl bg-emerald-600 text-white shadow-sm ring-1 ring-emerald-700/20">
				<svg aria-hidden="true" viewBox="0 0 24 24" class="h-5 w-5" fill="none">
					<rect x="5" y="3" width="14" height="18" rx="2" stroke="currentColor" stroke-width="2" fill="transparent" />
					<rect x="7" y="5" width="10" height="14" rx="1" stroke="currentColor" stroke-width="1.5" fill="transparent" opacity="0.6" />
				</svg>
			</span>
			<div class="leading-tight">
				<div class="text-sm font-semibold tracking-wide text-slate-700">Slabworks</div>
				<div class="text-base font-bold tracking-tight text-slate-950">Card restoration</div>
			</div>
		</a>

		<nav class="hidden items-center gap-1 md:flex" aria-label="Primary">
			{active !== "home" ? (
				<a class="rounded-full px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-100 hover:text-slate-950" href="/">
					Home
				</a>
			) : null}

			<a
				class={active === "gallery"
					? "rounded-full bg-slate-100 px-3 py-2 text-sm font-semibold text-slate-950"
					: "rounded-full px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-100 hover:text-slate-950"}
				href="/gallery"
				aria-current={active === "gallery" ? "page" : undefined}
			>
				Gallery
			</a>

			<a class="rounded-full px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-100 hover:text-slate-950" href={sectionHref("how-it-works")}>
				How it works
			</a>
			<a class="rounded-full px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-100 hover:text-slate-950" href={sectionHref("pricing")}>
				Pricing
			</a>
			<a class="rounded-full px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-100 hover:text-slate-950" href={sectionHref("faq")}>
				FAQ
			</a>

			<a
				class="ml-1 inline-flex items-center justify-center rounded-full bg-emerald-600 px-4 py-2 text-sm font-bold text-white shadow-sm hover:bg-emerald-700"
				href={mailtoHref}
			>
				Email photos
			</a>
		</nav>

		<a
			class="md:hidden inline-flex items-center justify-center rounded-full bg-emerald-600 px-4 py-2 text-sm font-bold text-white shadow-sm hover:bg-emerald-700"
			href={mailtoHref}
		>
			Email photos
		</a>
	</div>
</header>

