---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import BeforeAfterSwitcher from "../components/BeforeAfterSwitcher.astro";
import BeforeAfterSwitcherScript from "../components/BeforeAfterSwitcherScript.astro";
import { socials, mailtoHref } from "../lib/constants";
import { beforeAfterImages } from "../lib/images";
import { faqs } from "../lib/faqs";

const structuredData = {
	"@context": "https://schema.org",
	"@type": "ProfessionalService",
	name: "Slabworks",
	description:
		"Trading card restoration service. We carefully restore your cards with detailed inspection and honest communication. Based in Kingston, Ontario.",
	email: "chris@slabworks.ca",
	areaServed: "North America",
	address: {
		"@type": "PostalAddress",
		addressLocality: "Kingston",
		addressRegion: "ON",
		addressCountry: "CA",
	},
	makesOffer: {
		"@type": "Offer",
		price: "50",
		priceCurrency: "CAD",
		description: "$50 per card. 10% off on orders of 10+ cards.",
	},
	sameAs: socials.map((s) => s.href),
} as const;


const howItWorks = [
	{
		n: "01",
		title: "Send photos",
		body: "Email photos of your cards (front, back, and close-ups) along with your goal. We'll assess what's possible and outline any risks before you ship anything.",
	},
	{
		n: "02",
		title: "Get a plan",
		body: "We'll send you a restoration plan, quote, and estimated turnaround time (typically 2-3 weeks from approval). No surprises, just clear expectations.",
	},
	{
		n: "03",
		title: "Approve and ship",
		body: "Once approved, we'll send shipping instructions. After we receive your cards and confirm intake, we'll invoice you. Work begins after payment.",
	},
] as const;

---

<Layout
	title="Slabworks - Trading Card Restoration"
	description="Trading card restoration service. We carefully restore your cards with detailed inspection and honest communication. Based in Kingston, Ontario."
>
	<script type="application/ld+json" set:html={JSON.stringify(structuredData)}></script>

	<a
		href="#main"
		class="sr-only focus:not-sr-only focus:fixed focus:left-4 focus:top-4 focus:z-50 rounded-full bg-white px-4 py-2 text-sm font-semibold text-slate-950 shadow-lg ring-1 ring-white/30"
	>
		Skip to content
	</a>

	<div class="min-h-dvh bg-slate-50 pb-[calc(6rem+env(safe-area-inset-bottom))] text-slate-950 md:pb-0">
		<Header active="home" />

		<main id="main">
			<section class="relative">
				<div class="mx-auto w-full max-w-6xl px-5 py-8 sm:py-12 lg:py-16">
					<div class="grid gap-8 lg:grid-cols-2 lg:items-center lg:gap-12">
						<div>
							<h1 class="text-3xl font-black leading-tight tracking-tight text-slate-950 sm:text-5xl lg:text-6xl">
								Bring your trading cards back to life
							</h1>
							<p class="mt-4 max-w-2xl text-base leading-relaxed text-slate-700 sm:mt-5 sm:text-xl">
								Whether it's a childhood favorite or a valuable pickup, we'll restore it to display-ready condition—preserve memories, restore value, display with pride.
							</p>

							<div class="mt-6 flex flex-col gap-3 sm:mt-8 sm:flex-row sm:flex-wrap sm:items-center">
								<a
									class="inline-flex w-full items-center justify-center rounded-full bg-emerald-600 px-6 py-3 text-base font-bold text-white shadow-sm hover:bg-emerald-600 sm:w-auto"
									href={mailtoHref}
								>
									Get a free assessment
								</a>
								<a class="inline-flex w-full items-center justify-center rounded-full border border-slate-200 bg-white px-6 py-3 text-base font-semibold text-slate-700 shadow-sm hover:bg-slate-50 hover:text-slate-950 sm:w-auto" href="#pricing">
									View pricing
								</a>
							</div>

							<a href={mailtoHref} class="mt-5 inline-flex items-center gap-2 text-sm font-semibold text-slate-700 hover:text-emerald-600 transition-colors sm:mt-6">
								<svg aria-hidden="true" viewBox="0 0 24 24" class="h-4 w-4 text-emerald-600" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
									<rect x="2" y="4" width="20" height="16" rx="2"/>
									<path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
								</svg>
								chris@slabworks.ca
							</a>
						</div>

						<!-- Before/After Image Switcher -->
						<div>
							{beforeAfterImages[0] && (
								<BeforeAfterSwitcher
									beforeSrc={beforeAfterImages[0].beforeSrc}
									afterSrc={beforeAfterImages[0].afterSrc}
									beforeAlt={beforeAfterImages[0].beforeAlt}
									afterAlt={beforeAfterImages[0].afterAlt}
								/>
							)}
							<div class="mt-4 text-right">
								<a
									class="text-sm font-semibold text-emerald-600 hover:text-emerald-600"
									href="/gallery"
								>
									View Gallery →
								</a>
							</div>
						</div>
					</div>
				</div>
			</section>

			<section class="mx-auto w-full max-w-6xl scroll-mt-24 px-5 py-12 sm:py-14" id="how-it-works" aria-label="How it works">
				<div class="flex flex-wrap items-end justify-between gap-4">
					<div class="max-w-3xl">
						<h2 class="text-3xl font-extrabold tracking-tight text-slate-950">How it works</h2>
						<p class="mt-3 max-w-3xl text-slate-700">Photos → Plan → Ship.</p>
					</div>
				</div>

				<div class="mt-8 grid gap-5 md:grid-cols-3">
					{howItWorks.map((s) => (
						<div class="rounded-3xl bg-white p-6 ring-1 ring-slate-200/80 shadow-sm">
							<p class="text-sm font-semibold text-slate-600">{s.n}</p>
							<h3 class="mt-2 text-lg font-bold text-slate-950">{s.title}</h3>
							<p class="mt-3 text-sm leading-relaxed text-slate-700">{s.body}</p>
						</div>
					))}
				</div>

			</section>

			<section class="scroll-mt-24 border-y border-slate-200 bg-white" id="before-after" aria-label="Before and after photos">
				<div class="mx-auto w-full max-w-6xl px-5 py-12 sm:py-14">
					<div class="flex flex-wrap items-end justify-between gap-4">
						<div class="max-w-3xl">
							<h2 class="text-3xl font-extrabold tracking-tight text-slate-950">Before / After</h2>
							<p class="mt-3 max-w-3xl text-slate-700">
								Real transformations from our recent work. Each example shows the condition before restoration and the display-ready results after.
							</p>
						</div>
						<a
							class="text-sm font-semibold text-emerald-600 hover:text-emerald-600"
							href="/gallery"
						>
							View Gallery →
						</a>
					</div>

					<div class="mt-8 grid gap-5 md:grid-cols-3">
						{beforeAfterImages.slice(0, 3).map((img) => (
							<BeforeAfterSwitcher
								beforeSrc={img.beforeSrc}
								afterSrc={img.afterSrc}
								beforeAlt={img.beforeAlt}
								afterAlt={img.afterAlt}
							/>
						))}
					</div>
				</div>
			</section>

			<section class="mx-auto w-full max-w-6xl scroll-mt-24 px-5 py-12 sm:py-14" id="pricing" aria-label="Pricing">
				<h2 class="text-3xl font-extrabold tracking-tight text-slate-950">Pricing</h2>
				<p class="mt-3 max-w-3xl text-slate-700">Simple: $50 per card. Save 10% on orders of 10+ cards. No hidden fees.</p>

				<div class="mt-6 grid gap-5 lg:grid-cols-12 lg:items-stretch">
					<div class="lg:col-span-5 lg:h-full">
						<div class="rounded-3xl border border-slate-200 bg-emerald-50/30 p-5 lg:h-full">
								<div class="flex flex-wrap items-end justify-between gap-3">
									<div>
										<div class="text-4xl font-black tracking-tight text-slate-950 sm:text-5xl">$50</div>
										<div class="mt-1 text-base font-semibold text-slate-700">per card</div>
									</div>
								</div>
								<p class="mt-5 text-xs leading-relaxed text-slate-600">Shipping costs are separate; return shipping is billed at cost with tracking.</p>
								<div class="mt-3 inline-flex items-center gap-2 rounded-2xl bg-white/80 px-3 py-2 text-xs font-semibold text-slate-700 ring-1 ring-slate-200/80">
									<span class="h-1.5 w-1.5 rounded-full bg-emerald-600"></span>
									<span>10% off when you send 10+ cards</span>
								</div>

								<div class="mt-4 border-t border-slate-200/70 pt-3">
									<p class="text-sm font-bold text-slate-950">What's included</p>
									<ul class="mt-3 space-y-1 text-sm text-slate-700">
										<li class="flex items-start gap-2">
											<span class="mt-2 h-1.5 w-1.5 shrink-0 rounded-full bg-emerald-600"></span>
											<span>Careful inspection</span>
										</li>
								<li class="flex items-start gap-2">
									<span class="mt-2 h-1.5 w-1.5 shrink-0 rounded-full bg-emerald-600"></span>
									<span>Written plan before work begins</span>
								</li>
										<li class="flex items-start gap-2">
											<span class="mt-2 h-1.5 w-1.5 shrink-0 rounded-full bg-emerald-600"></span>
											<span>Before/after photos</span>
										</li>
										<li class="flex items-start gap-2">
											<span class="mt-2 h-1.5 w-1.5 shrink-0 rounded-full bg-emerald-600"></span>
											<span>Secure return packaging</span>
										</li>
									</ul>
									<p class="mt-4 text-xs leading-relaxed text-slate-600">We stand behind our work. No hidden fees—what you see is what you pay.</p>
								</div>
						</div>

					</div>

					<div class="lg:col-span-7 lg:flex lg:h-full lg:flex-col lg:gap-5">
						<div class="rounded-3xl bg-white p-6 ring-1 ring-slate-200/80 shadow-sm lg:flex-1">
							<h3 class="text-lg font-bold text-slate-950">Payment</h3>
							<p class="mt-3 text-sm leading-relaxed text-slate-700">
								Payment is due after we receive your cards (intake confirmed), before restoration begins. We'll include payment options in your invoice.
							</p>
						</div>

						<div class="mt-5 rounded-3xl bg-white p-6 ring-1 ring-slate-200/80 shadow-sm lg:mt-0 lg:flex-1">
							<h3 class="text-lg font-bold text-slate-950">Shipping</h3>
							<p class="mt-3 text-sm leading-relaxed text-slate-700">
								Shipping isn't included. Return shipping is billed at cost with tracking. We recommend tracked shipping both ways. For higher-value cards, consider insurance and signature on delivery. We'll provide the exact shipping address after we review your photos.
							</p>
						</div>
					</div>
				</div>
			</section>

			<section class="mx-auto w-full max-w-6xl scroll-mt-24 px-5 py-12 sm:py-14" id="faq" aria-label="Common questions">
				<h2 class="text-3xl font-extrabold tracking-tight text-slate-950">Common questions</h2>
				<p class="mt-3 max-w-3xl text-slate-700">Straight answers to questions collectors ask before sending photos.</p>

				<div class="mt-8 space-y-4">
					{faqs.map((item) => (
						<details class="group rounded-3xl bg-white p-6 ring-1 ring-slate-200/80 shadow-sm open:bg-slate-50">
							<summary class="cursor-pointer list-none text-lg font-bold text-slate-950">
								<span class="mr-2 inline-block translate-y-px text-slate-400 group-open:rotate-90">›</span>
								{item.q}
							</summary>
							<p class="mt-3 text-sm leading-relaxed text-slate-700">
								{item.a}
							</p>
						</details>
					))}
				</div>
			</section>

			<!-- Contact CTA section removed -->
		</main>

		<Footer />
	</div>

	<BeforeAfterSwitcherScript />
</Layout>